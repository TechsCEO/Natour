{"version":3,"sources":["index.js"],"names":["mapbox","document","getElementById","loginForm","querySelector","logOutBtn","userDataForm","userPasswordForm","locations","JSON","parse","dataset","addEventListener","event","preventDefault","email","value","password","logout","textContent","name","passwordCurrent","passwordConfirm","dataObj"],"mappings":"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","file":"bundle.map","sourceRoot":"","sourcesContent":["import '@babel/polyfill';\r\nimport { displayMap } from './mapbox';\r\nimport { login, logout } from './login';\r\nimport { showAlert } from './alert';\r\n//import { updateSettings } from './updateSettings';\r\nimport { updateData, updatePassword } from './updateSettings';\r\n\r\n\r\n//DOM elements\r\nconst mapbox = document.getElementById('map');\r\nconst loginForm = document.querySelector('.form--login');\r\nconst logOutBtn = document.querySelector('.nav__el--logout');\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\n\r\n\r\n// Delegation\r\nif (mapbox) {\r\n  const locations = JSON.parse(mapbox.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', event => {\r\n    event.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n\r\n    login(email, password);\r\n  });\r\n}\r\n\r\nif (logOutBtn) {\r\n  logOutBtn.addEventListener('click', logout);\r\n}\r\n\r\nif (userDataForm) {\r\n  userDataForm.addEventListener('submit', async event => {\r\n    event.preventDefault();\r\n    document.querySelector('.btn--save--settings').textContent = 'Updating...';\r\n    const name = document.getElementById('name').value;\r\n    const email = document.getElementById('email').value;\r\n\r\n    await updateData(name, email);\r\n    document.querySelector('.btn--save--settings').textContent = 'Save settings';\r\n  });\r\n}\r\n\r\nif (userPasswordForm) {\r\n  userPasswordForm.addEventListener('submit', async event => {\r\n    event.preventDefault();\r\n    document.querySelector('.btn--save--password').textContent = 'Updating...';\r\n\r\n    const passwordCurrent = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    const dataObj = {\r\n      passwordCurrent,\r\n      password,\r\n      passwordConfirm\r\n    };\r\n    await updatePassword(dataObj);\r\n\r\n    document.querySelector('.btn--save--password').textContent = 'SAVE PASSWORD';\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n  });\r\n}\r\n"]}